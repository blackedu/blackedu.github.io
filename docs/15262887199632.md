---
title: numpy 介绍
Tags:
  - python
  - numpy
category: python
date: 2018-05-10 00:55:51
Date: 2018-05-09 00:00:00
tags:
---


## 摘要
本文主要介绍numpy的基本使用，分别从以下几个方面介绍:

>- 数组的创建
>- 高维数据的介绍
>- 数据的访问
>- numpy中的数学函数
>- numpy中的随机模块介绍

<!--more-->

## 数组的创建

```python
>>> # 导入模块
>>> import numpy as np
>>> # 手动创建数组
>>> arr = np.array([1, 2, 3, 4])
>>> arr
array([1, 2, 3, 4])
>>> type(arr)
numpy.ndarray
```

```python
>>> # 列表转化
>>> l = [1, 9, 0, 8]
>>> np.array(l)
array([1, 9, 0, 8])
```

```python
>>> # 函数创建
>>> np.linspace(0, 20, 5)
array([  0.,   5.,  10.,  15.,  20.])
>>> np.linspace(0, 3, 5, endpoint=False)
array([ 0. ,  0.6,  1.2,  1.8,  2.4])
>>> np.linspace(0, 3, 5, endpoint=True)
array([ 0.  ,  0.75,  1.5 ,  2.25,  3.  ])
```

```python
>>> # 创建单位数组
>>> np.ones(5)
array([ 1.,  1.,  1.,  1.,  1.])
>>> np.ones((3, 4))
    array([[ 1.,  1.,  1.,  1.],
           [ 1.,  1.,  1.,  1.],
           [ 1.,  1.,  1.,  1.]])

>>> # 创建全为0的数组
>>> np.zeros(4)
array([ 0.,  0.,  0.,  0.])
>>> np.zeros((3, 4))
    array([[ 0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.],
           [ 0.,  0.,  0.,  0.]])
```
```python
# 打印出np模块中小写且不易_开头的函数或子模块
funcs = [each for each in dir(np) if each.islower() and not each.startswith("_")]
for f in funcs:
        print(f)
```

## 高维数组介绍

```python
# 所谓的高维数组就是二维以上的数组
>>> a = np.ones((3, 4, 3))
>>> a.shape
(3, 4, 3)
>>> b = np.ones((3,4,5,6))
>>> b
    array([[[[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]],
    
            [[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]],
    
            [[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]],
    
            [[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]]],

           [[[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]],
    
            [[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]],
    
            [[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]],
    
            [[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]]],

           [[[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]],
    
            [[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]],
    
            [[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]],
    
            [[ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.],
             [ 1.,  1.,  1.,  1.,  1.,  1.]]]])

>>> b.shape
(3, 4, 5, 6)
```
## 数组的访问

### 一维数组的访问


```python
>>> arr = np.linspace(1, 20, 20)
>>> arr
array([  1.,   2.,   3.,   4.,   5.,   6.,   7.,   8.,   9.,  10.,  11.,  12.,  13.,  14.,  15.,  16.,  17.,  18.,  19.,  20.])
>>> # 访问某个元素
>>> print(arr[3], arr[10], arr[-1])
4.0 11.0 20.0
>>> # 切片
>>> arr[:10] # 前10个元素
>>> array([  1.,   2.,   3.,   4.,   5.,   6.,   7.,   8.,   9.,  10.])
>>> arr[3: 8]
array([ 4.,  5.,  6.,  7.,  8.])
```
### 二维数组访问
```python
>>> arr = np.array([[1, 2, 3],[4, 5, 6],[7, 8, 9]])
>>> arr
	array([[1, 2, 3],
           [4, 5, 6],
           [7, 8, 9]])

>>> arr = np.linspace(1, 24, 24).reshape(4, 6) # 改变数组维度
>>> arr
    array([[  1.,   2.,   3.,   4.,   5.,   6.],
           [  7.,   8.,   9.,  10.,  11.,  12.],
           [ 13.,  14.,  15.,  16.,  17.,  18.],
           [ 19.,  20.,  21.,  22.,  23.,  24.]])
>>> # 访问单个元素
>>> print(arr[2, 2], arr[2, -1])
    15.0 18.0
>>> # 切片
>>> arr[:4, 2]
array([  3.,   9.,  15.,  21.])
>>> arr[:8, 3]
array([  4.,  10.,  16.,  22.])
>>> arr[1:3,1:4]
    array([[  8.,   9.,  10.],
           [ 14.,  15.,  16.]])
```
### 三维数据的切片

```python
>>> arr = np.linspace(1, 24, 24)
>>> a = arr.reshape(2, 3, 4) # 变为4个2*3的数组
>>> a
    array([[[  1.,   2.,   3.,   4.],
            [  5.,   6.,   7.,   8.],
            [  9.,  10.,  11.,  12.]],
    
           [[ 13.,  14.,  15.,  16.],
            [ 17.,  18.,  19.,  20.],
            [ 21.,  22.,  23.,  24.]]])

>>> a[:, :, 0]
    array([[  1.,   5.,   9.],
           [ 13.,  17.,  21.]])
>>> a[:, :, 2]
    array([[  3.,   7.,  11.],
           [ 15.,  19.,  23.]])
```
### 四维数据访问*

```python
>>> a = arr.reshape(2, 3, 2, 2)
>>> a
    array([[[[  1.,   2.],
             [  3.,   4.]],
    
            [[  5.,   6.],
             [  7.,   8.]],
    
            [[  9.,  10.],
             [ 11.,  12.]]],

           [[[ 13.,  14.],
             [ 15.,  16.]],
    
            [[ 17.,  18.],
             [ 19.,  20.]],
    
            [[ 21.,  22.],
             [ 23.,  24.]]]])
>>> a[:,:,0,0]
    array([[  1.,   5.,   9.],
           [ 13.,  17.,  21.]])
>>> a[:,:,0,1]
    array([[  2.,   6.,  10.],
           [ 14.,  18.,  22.]])

>>> a[:,:,1,0]
    array([[  3.,   7.,  11.],
           [ 15.,  19.,  23.]])
>>> a[:,:,1,1]
    array([[  4.,   8.,  12.],
           [ 16.,  20.,  24.]])
```

## numpy 中包含的数学函数

* 基本初等函数有指数、对数、三角函数和反三角函数
* 这些函数可以作用在数组上


```python
>>> np.sin([0, np.pi/2, np.pi])
    array([  0.00000000e+00,   1.00000000e+00,   1.22464680e-16])
>>> np.exp([1, 2, 3])
    array([  2.71828183,   7.3890561 ,  20.08553692])
>>> np.arccos([-1, 0.7, 0.5])
    array([ 3.14159265,  0.79539883,  1.04719755])
```

$$\arccos(x) \in [-1, 1], x \in \mathbf{R}$$


```python
>>>np.log(np.e)
    1.0
```
## numpy 中的随机数

```python
for each in [r for r in dir(np.random) if r.startswith("rand")]:
    print(each)
```

```python
rand
randint
randn
random
random_integers
random_sample
```

```python
>>> np.random.rand(4, 2) # rand 函数产生4*2个0-1的数组
    array([[ 0.91038714,  0.16091908],
           [ 0.98044763,  0.17440844],
           [ 0.39304426,  0.41782203],
           [ 0.46410902,  0.0015087 ]])
>>> np.random.rand(4, 2, 6)
    array([[[ 0.15272725,  0.26256781,  0.59625623,  0.89170225,  0.72874358,
              0.18533281],
            [ 0.73863192,  0.93472319,  0.24611126,  0.30471015,  0.18843108,
              0.02758109]],

           [[ 0.56896932,  0.96326986,  0.90336296,  0.56994262,  0.55665726,
              0.38798603],
            [ 0.92973051,  0.27844012,  0.0985924 ,  0.44849547,  0.8300832 ,
              0.01324898]],
    
           [[ 0.2583272 ,  0.25479065,  0.66568169,  0.16672935,  0.54792409,
              0.11587967],
            [ 0.50775243,  0.51624776,  0.94792482,  0.77257039,  0.45376565,
              0.29470835]],
    
           [[ 0.85002585,  0.35317237,  0.56006337,  0.37487033,  0.27816721,
              0.84461002],
            [ 0.55040022,  0.90121813,  0.0549713 ,  0.36049076,  0.64911919,
              0.38614287]]])

>>>np.random.randint(2, 10, 4) # randint 函数产生2-10之前1行4列的数组，并且元素为int
array([3, 9, 6, 3])
>>> np.random.randint(2, 10, (4, 6)) # 产生2-10之前4行6列的数组，并且元素为int
    array([[9, 8, 3, 7, 9, 8],
           [6, 9, 3, 4, 2, 9],
           [3, 5, 5, 8, 5, 8],
           [9, 2, 4, 5, 6, 5]])
>>> np.random.random(10)
array([ 0.4770817 ,  0.57795414,  0.44482459,  0.3769292 ,  0.1661016 ,
        0.74752415,  0.96401987,  0.07240452,  0.43682854,  0.10443297])
>>> np.random.random((2, 10))
array([[ 0.52301312,  0.4864412 ,  0.89972328,  0.82746477,  0.95479221,
             0.86715364,  0.256681  ,  0.51990663,  0.17774745,  0.70042197],
           [ 0.15280295,  0.2686739 ,  0.96939213,  0.63998553,  0.30170454,
             0.37584817,  0.30815797,  0.44782591,  0.1243706 ,  0.0706341 ]])
```

高斯函数：
$$
p(x) = \frac{1}{\sqrt{ 2 \pi \sigma^2 }}
                     e^{ - \frac{ (x - \mu)^2 } {2 \sigma^2} }
$$


```python
>>> np.random.normal(0, 1, 100)
    array([ 0.21567583, -0.79671875,  0.01686898,  0.09509074, -0.52578661,
           -1.1992135 ,  0.49124372, -1.81260819, -1.06767488, -0.33581036,
           -1.79315307,  0.45560437,  2.08159303,  0.1380093 ,  0.08101351,
           -0.15945124, -0.31070376, -0.88762797, -0.35076175, -1.9747881 ,
           -0.0469248 , -0.84640361, -0.90171107,  0.93478576, -1.60251953,
            0.21092968,  2.04723361, -0.19348244,  1.65839478, -0.09911828,
           -1.55453118,  0.57225116, -0.01678493,  2.23063505,  0.69452068,
            1.21468741,  0.57398016,  1.0868435 , -0.83116472, -0.12509612,
            1.09543699,  0.6677533 , -0.24815382,  0.46381439, -0.01050908,
           -0.07561502,  0.09411537, -0.14268088, -0.28348707,  0.17527535,
           -0.31529805,  0.67364447, -0.11364052,  0.36804289, -0.62309136,
            1.45303138,  0.93087444,  1.18864883, -1.08940053, -0.47426502,
            1.15404659,  1.12210561, -0.77543067, -1.09107913, -0.82181409,
            0.28759481, -0.39278327, -0.65946283, -0.08149542, -1.44972629,
            0.16306481,  0.89675769,  1.14150418,  0.70403656,  0.83317131,
            1.20117688,  0.90683835,  0.26243783,  1.05980527,  0.51195354,
            0.28787645,  1.46469033,  1.27605765, -0.17570943, -0.30151846,
            1.39338591, -0.71962084,  1.02852837, -1.60341716,  0.21223169,
            1.81623487, -0.52410019, -0.54041142, -0.87286751,  1.162144  ,
            0.6574619 , -0.49761922, -1.93724515,  1.04512527,  0.72530217])
>>> np.random.normal(0, 1, (2,10))
array([[ 0.68242207,  0.01796126, -1.35715093,  0.50236963, -0.70498017,
             0.53083477,  0.79293694, -0.42701108, -0.13138455, -0.48029193],
           [-1.03613625,  1.43627936, -0.14722894, -0.39896957, -0.50561351,
             0.32265692, -1.65078718,  0.93509765,  0.25015758,  0.49961422]])
```

```python
>>> help(np.random.poisson)
    Help on built-in function poisson:
    
    poisson(...) method of mtrand.RandomState instance
        poisson(lam=1.0, size=None)
        
        Draw samples from a Poisson distribution.
        
        The Poisson distribution is the limit of the binomial distribution
        for large N.
        
        Parameters
        ----------
        lam : float or array_like of floats
            Expectation of interval, should be >= 0. A sequence of expectation
            intervals must be broadcastable over the requested size.
        size : int or tuple of ints, optional
            Output shape.  If the given shape is, e.g., ``(m, n, k)``, then
            ``m * n * k`` samples are drawn.  If size is ``None`` (default),
            a single value is returned if ``lam`` is a scalar. Otherwise,
            ``np.array(lam).size`` samples are drawn.
        
        Returns
        -------
        out : ndarray or scalar
            Drawn samples from the parameterized Poisson distribution.
        
        Notes
        -----
        The Poisson distribution
        
        .. math:: f(k; \lambda)=\frac{\lambda^k e^{-\lambda}}{k!}
        
        For events with an expected separation :math:`\lambda` the Poisson
        distribution :math:`f(k; \lambda)` describes the probability of
        :math:`k` events occurring within the observed
        interval :math:`\lambda`.
        
        Because the output is limited to the range of the C long type, a
        ValueError is raised when `lam` is within 10 sigma of the maximum
        representable value.
        
        References
        ----------
        .. [1] Weisstein, Eric W. "Poisson Distribution."
               From MathWorld--A Wolfram Web Resource.
               http://mathworld.wolfram.com/PoissonDistribution.html
        .. [2] Wikipedia, "Poisson distribution",
               http://en.wikipedia.org/wiki/Poisson_distribution
        
        Examples
        --------
        Draw samples from the distribution:
        
        >>> import numpy as np
        >>> s = np.random.poisson(5, 10000)
        
        Display histogram of the sample:
        
        >>> import matplotlib.pyplot as plt
        >>> count, bins, ignored = plt.hist(s, 14, normed=True)
        >>> plt.show()
        
        Draw each 100 values for lambda 100 and 500:
        
        >>> s = np.random.poisson(lam=(100., 500.), size=(100, 2))
```

**产生$\lambda = 5$的10个元素的数组**,其中泊松函数为：
$$
f(k; \lambda)=\frac{\lambda^k e^{-\lambda}}{k!}
$$


```python
>>> np.random.poisson(5, 10)
array([7, 2, 6, 3, 5, 5, 0, 3, 4, 8])
```

