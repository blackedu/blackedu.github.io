# åä¸ªPythonå°æŠ€å·§æ€»ç»“
æœ¬æ–‡æ•´ç†äº†Pythonçš„10ä¸ªå°æŠ€å·§[^1].æ–‡ç« å‚è€ƒäº†[30 Python Best Practices, Tips, And Tricks](https://towardsdatascience.com/30-python-best-practices-tips-and-tricks-caefb9f8c5f5).æœ‰äº›æŠ€å·§æˆ–å»ºè®®æŒºä¸é”™çš„ï¼Œ

## 1. æ£€æŸ¥Pythonçš„æœ€ä½ç‰ˆæœ¬çš„æ–¹æ³•
ä½ å¯ä»¥åœ¨ä»£ç ä¸­æ£€æŸ¥Pythonçš„ç‰ˆæœ¬ï¼Œä»¥ç¡®ä¿åˆ«äººæ­£å¸¸è¿è¡Œä½ çš„ä»£ç ã€‚

```python
import sys

if not sys.version_info > (2, 7):
   # berate your user for running a 10 year
   # python version
elif not sys.version_info >= (3, 5):
   # Kindly tell your user (s)he needs to upgrade
   # because you're using 3.5 features
```

## 2. æ£€æŸ¥å¯¹è±¡çš„å†…å­˜ä½¿ç”¨æƒ…å†µ
ç›´æ¥ä½¿ç”¨`sys.getsizeof`å‡½æ•°

```python
import sys

mylist = range(0, 10000)
print(sys.getsizeof(mylist))
# 48
```
ä¸ºä»€ä¹ˆæ˜¯48bytesï¼Œè¿™æ˜¯å› ä¸ºrangeå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªç±»ï¼Œç”¨èµ·æ¥åƒæ˜¯åˆ—è¡¨ï¼Œä½†æ˜¯æ¯”åˆ—è¡¨æ›´åŠ é«˜æ•ˆçš„åˆ©ç”¨å†…å­˜ã€‚

å¯ä»¥ä½¿ç”¨åˆ—è¡¨å±•å¼€å¼æ¥æ¯”è¾ƒå†…å­˜ä½¿ç”¨æƒ…å†µ

```python
import sys

myreallist = [x for x in range(0, 10000)]
print(sys.getsizeof(myreallist))
# 87632
```

## 3. ä½¿ç”¨æ•°æ®ç±»
è‡ªä»Python3.7ä»¥åï¼Œæä¾›äº†æ•°æ®ç±»`data classes`.ç›¸æ¯”æ™®é€šç±»æœ‰æ›´å¤šçš„ä¼˜ç‚¹ã€‚
1. æœ€å°‘çš„ä»£ç é‡
2. é»˜è®¤å®ç°äº†`__eq__`å’Œ`__repr__`æ¥å£ï¼Œå¯ä»¥ç›´æ¥æ¯”è¾ƒæ•°æ®å¤§å°å’Œæ‰“å°æ•°æ®
3. è¦æ±‚ç±»å‹æ ‡æ³¨ï¼Œé™ä½äº†ä»£ç bugçš„å¯èƒ½æ€§ã€‚

```python
from dataclasses import dataclass

@dataclass
class Card:
    rank: str
    suit: str
    
card = Card("Q", "hearts")

print(card == card)
# True

print(card.rank)
# 'Q'

print(card)
Card(rank='Q', suit='hearts')
```
å®ç°æ•°æ®ä¸å¯æ”¹å˜çš„æ•°æ®ç±»

```python
from dataclasses import dataclass


@dataclass(frozen=True)
class Position:
    name: str
    lon: float = 0.0
    lat: float = 0.0


pos = Position('Oslo', 10.8, 59.9)
print(pos.name)

pos.name = "Stockholm" # IDEç›´æ¥ä¼šæç¤ºæŠ¥é”™

# Traceback (most recent call last):
#   File "/Users/vincent/Documents/pyhome/demo2.py", line 14, in <module>
#     pos.name = "Stockholm"
#   File "<string>", line 3, in __setattr__
# dataclasses.FrozenInstanceError: cannot assign to field 'name'
```
è¯¦ç»†æ›´å¤šä½¿ç”¨å¯ä»¥[å‚è€ƒè¿™é‡Œ](https://realpython.com/python-data-classes/)

## 4. äº¤æ¢å˜é‡
æœ‰ä¸€æ¬¡é¢è¯•çš„æ—¶å€™ç¢°åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚â€œå¦‚ä½•åœ¨ä¸å¼•å…¥ç¬¬ä¸‰ä¸ªå˜é‡çš„æƒ…å†µä¸‹ï¼Œäº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼â€ã€‚åˆ«çš„è¯­è¨€å¯èƒ½ä¼˜ç‚¹éº»çƒ¦ï¼Œä½†æ˜¯å¯¹Pythonæ˜¯åœ¨å¤ªå‹å¥½äº†ã€‚

```python
a = 1
b = 2
a, b = b, a
print (a)
# 2
print (b)
# 1
```

## 5. åˆå¹¶å­—å…¸æ•°æ®
è‡ªä»Python3.5åˆå¹¶å­—å…¸å°±éå¸¸çš„å®¹æ˜“äº†ã€‚

```python
dict1 = { 'a': 1, 'b': 2 }
dict2 = { 'b': 3, 'c': 4 }
merged = { **dict1, **dict2 }
print (merged)
# {'a': 1, 'b': 3, 'c': 4}
```
å¦‚æœç¢°åˆ°é‡å¤çš„keyï¼Œä¹‹å‰çš„keyå¯¹ç”¨çš„å€¼å°†ä¼šè¢«è¦†ç›–ã€‚

## 6. Emojiçš„ä½¿ç”¨
å®‰è£…emojiåŒ…

```
pip3 install emoji
```

```python
import emoji
result = emoji.emojize('Python is :thumbs_up:')
print(result)
# 'Python is ğŸ‘'

# You can also reverse this:
result = emoji.demojize('Python is ğŸ‘')
print(result)
# 'Python is :thumbs_up:'
```

## 7. åè½¬å­—ç¬¦ä¸²å’Œåˆ—è¡¨
ä½ å¯ä»¥åˆ©ç”¨åˆ‡ç‰‡è®¿é—®çš„æ–¹å¼ï¼Œå®ç°åè½¬å­—ç¬¦ä¸²å’Œåˆ—è¡¨ï¼Œåªè¦å°†æ­¥é•¿è®¾ä¸º-1å³å¯ã€‚

```python
revstring = "abcdefg"[::-1]
print(revstring)
# 'gfedcba'

revarray = [1, 2, 3, 4, 5][::-1]
print(revarray)
# [5, 4, 3, 2, 1]
```

## 8. ä»åˆ—è¡¨æˆ–å­—ç¬¦ä¸²ä¸­è·å–å”¯ä¸€å…ƒç´ ï¼ˆå…ƒç´ å»é‡ï¼‰
é€šè¿‡`set`å‡½æ•°åˆ›å»ºä¸€ä¸ª`set`é›†åˆï¼Œå°±èƒ½å®ç°å…ƒç´ å»é‡ã€‚

```python
mylist = [1, 1, 2, 3, 4, 5, 5, 5, 6, 6]
print (set(mylist))
# {1, 2, 3, 4, 5, 6}

# And since a string can be treated like a 
# list of letters, you can also get the 
# unique letters from a string this way:
print (set("aaabbbcccdddeeefff"))
# {'a', 'b', 'c', 'd', 'e', 'f'}
```

## 9. æ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ å€¼

```python
test = [1, 2, 5, 3, 5, 4, 2, 2, 5, 3, 1, 4, 5, 4, 5, 4, 5, 10]
print(max(set(test), key = test.count))
# 5
```

1. set(test)è¿”å›å»é‡ä»¥åçš„å…ƒç´ å€¼
2. maxå‡½æ•°è·å–æœ€å¤§å€¼ï¼Œæ¯”è¾ƒçš„keyæ˜¯å…ƒç´ å‡ºç°çš„æ¬¡æ•°
3. æœ€ç»ˆç»Ÿè®¡å‡ºset(test)ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ å€¼

## 10. åˆ›å»ºè¿›åº¦æ¡
å¯ä»¥ä½¿ç”¨`progress`åŒ…å¿«é€Ÿåˆ›å»ºè¿›åº¦æ¡

```
pip3 install progress
```

```python
from progress.bar import Bar
import time

bar = Bar('Processing', max=20)
for i in range(20):
    # Do some work
    time.sleep(0.2)
    bar.next()
    
bar.finish()
```

![1_JAQfXWEmuu-9Cvvd5LZPpg](media/15789817867460/1_JAQfXWEmuu-9Cvvd5LZPpg.gif)

## å‚è€ƒæ–‡ç« 

[^1]: [30 Python Best Practices, Tips, And Tricks](https://towardsdatascience.com/30-python-best-practices-tips-and-tricks-caefb9f8c5f5)


